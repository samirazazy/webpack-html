!function(t){t.widget("HAF.MCQWidget",{options:{arr:void 0,audioBasePath:void 0,lastSelected:void 0,audioTag:void 0,bkeepOrder:!1,bMultiSelect:!0,optionData:[],change:"CHANGE",correctOrder:[],cOrder:[]},constants:function(){return{change:this.options.change}},disable:function(o,i){var e,s,r=[];for(void 0!==i?void 0!==t(i).get(0).bDisabled&&r.push(i):r=this.options.arr,e=0;e<r.length;e+=1)s=r[e],o===!0?(t(s).addClass("disabled"),t(s).get(0).bDisabled=!0):(t(s).removeClass("disabled"),t(s).get(0).bDisabled=!1)},reset:function(){var o,i;for(o=0;o<this.options.arr.length;o+=1)i=this.options.arr[o],t(i).removeClass("active"),t(i).removeClass("disabled"),i.bDisabled=!1;this.options.correctOrder=this.options.cOrder.slice(0),this.options.lastSelected=void 0,this._stopAudio()},_create:function(){var o,i;if(this.options.arr=this.element.find("[type='option']"),this.options.cOrder=this.options.correctOrder.slice(0),this.options.optionData.length!==this.options.arr.length)return console.error("Options count and data do not match..."),void 0;for(o=0;o<this.options.arr.length;o+=1)i=this.options.arr[o],i.order=o,t(i).data("correct",this.options.optionData[o]),i.bDisabled=!1,this._addClick(i)},_addClick:function(o){var i,e,s,r=this;t(o).on("click",function(){s={el:t(this),isCorrect:t(this).data("correct")},e=r._validateResponse(this),e.bProceed!==!1&&(e.bOrder===!1&&(s.isCorrect=!1),r.options.bMultiSelect===!1&&t(r.options.lastSelected).removeClass("active"),t(this).addClass("active"),r.options.lastSelected=this,i=r._getAudioSource(this),void 0!==i.file&&(r._stopAudio(),r._playAudio(i.file,i.type)),t(r.element).trigger(r.options.change,s))})},_validateResponse:function(t){var o={bProceed:!0,bOrder:!0};return t.bDisabled===!0?(o.bProceed=!1,o):(this.options.bkeepOrder&&(this.options.correctOrder[0].toString()!==t.order.toString()?o.bOrder=!1:(this.options.correctOrder.shift(),0===this.options.correctOrder.length&&(this.options.correctOrder=this.options.cOrder.slice(0)))),o)},_getAudioSource:function(o){var i,e,s,r=["mp3","ogg"];if(e=t(o).data("audiofile"),void 0===e)return{file:void 0,type:void 0};for(void 0!==this.options.audioBasePath&&this.options.audioBasePath.length>0&&(e=this.options.audioBasePath+"/"+e),void 0!==t(o).data("audiotype")&&(r=t(o).data("audiotype").split(",")),i=0;i<r.length;i+=1)if(s="."+r[i],-1!==e.indexOf(s)){r=[];break}return{file:e,type:r}},_playAudio:function(o,i){var e,s="";for(void 0===this.options.audioTag&&(this.options.audioTag=document.createElement("audio")),t(this.options.audioTag).html(""),e=0;e<i.length;e+=1)s=s+"<source src = '"+o+"."+i[e]+"'></source>";0===s.length&&(s="<source src = '"+o+"'></source>"),t(this.options.audioTag).append(s),this.options.audioTag.load(),this.options.audioTag.play()},_stopAudio:function(){void 0!==this.options.audioTag&&this.options.audioTag.pause()},_destroy:function(){this.reset();var o,i;for(o=0;o<this.options.arr.length;o+=1)i=this.options.arr[o],t(i).off("click")}})}(jQuery);