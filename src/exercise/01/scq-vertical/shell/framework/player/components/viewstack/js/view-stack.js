define(["marionette","player/base/base-composite-comp","components/viewstack/model/viewstack-model","components/viewstack/js/view","components/viewstack/model/view-model"],function(e,t,o,n,r){var i,s,c,l;return i=s=c=null,l=t.extend({template:_.template(""),itemView:n,tagName:"div",className:"viewStackLayout",initialize:function(e){this.model=new o,s=this.model,i=this,i.checkPram(e.totalViews,"NumberOfView")&&s.set("totalViews",e.totalViews),i.checkPram(e.currentActive,"CurrentView")&&s.set("currentView",e.currentActive);var t,n,l,d,a,u=[];n=e.classList,l=e.contentList,d=s.get("currentView"),t=!1,a=Backbone.Collection.extend({model:r}),_.times(s.get("totalViews"),function(e){var t=new r;d-1===e&&t.set("isVisible",!0),void 0!==n&&void 0!==n[e]&&t.set("Viewclass",n[e]),void 0!==l&&void 0!==l[e]&&t.set("viewContent",l[e]),u.push(t)}),this.collection=new a(u),c=this.collection,u=null,i.listenTo(s,"change:currentView",i.viewUpdate),i.listenTo(s,"change:totalViews",function(){i.trigger(i.events.VIEW_DELETED)})},onRender:function(){},events:{MAX_VIEW:"MAX_VIEW",MIN_VIEW:"MIN_VIEW",VIEW_CHANGED:"VIEW_CHANGED",VIEW_DELETED:"VIEW_DELETED"},viewUpdate:function(){_.each(c.models,function(e){e.set("isVisible",!1)});var e,t=i.currentSelectedIndex();e=c.models[t-1],e.set("isVisible",!0),i.trigger(i.events.VIEW_CHANGED)},checkPram:function(e,t){var o,n,r=!1;switch(t){case"NumberOfView":o=/^\d+$/,r=o.test(e),r||console.error("please enter correct no of views");break;case"CurrentView":if(void 0===e){r=!1;break}n=/^\d+$/,r=n.test(e),r||console.error("please enter correct active view")}return r}}),l.prototype._super=t,l.prototype.totalViews=function(){return s.get("totalViews")},l.prototype.currentSelectedIndex=function(){return s.get("currentView")},l.prototype.nextView=function(){var e=i.currentSelectedIndex()+1;i.setView(e)},l.prototype.previousView=function(){var e=i.currentSelectedIndex()-1;i.setView(e)},l.prototype.setView=function(e){return 1>e?(i.trigger(i.events.MIN_VIEW),void 0):e>i.totalViews()?(i.trigger(i.events.MAX_VIEW),void 0):(s.set("currentView",e),void 0)},l.prototype.changeCurrentViewClass=function(e){var t=i.currentSelectedIndex();l.prototype.chnageClassofView(t,e)},l.prototype.changeClassofView=function(e,t){c.models[e-1].set("Viewclass",t)},l.prototype.changeViewIndex=function(e,t){var o,n=i.currentSelectedIndex();return e===n?(i.changeCurrentViewIndex(t),void 0):t===n?(i.changeCurrentViewIndex(e),void 0):(o=c.models[e-1],c.models[e-1]=c.models[t-1],c.models[t-1]=o,void 0)},l.prototype.changeCurrentViewIndex=function(e){var t,o=i.currentSelectedIndex();t=c.models[e-1],c.models[e-1]=c.models[o-1],c.models[o-1]=t,i.setView(e)},l.prototype.addContentToView=function(e,t){var o=c.models[e-1].get("viewContent");c.models[e-1].set("viewContent",o+t)},l.prototype.removeView=function(e){if(1>=e)return console.error("can not delete this view"),void 0;if(e>i.totalViews())return console.error("this view does not exist"),void 0;c.models[e-1].destroy(),s.set("totalViews",s.get("totalViews")-1);var t=i.currentSelectedIndex();t===e&&i.setView(e-1)},l.prototype.removeCurrentView=function(){var e=i.csurrentSelectedIndex();i.removeView(e)},l.prototype.destroy=function(){return _.invoke(c.toArray(),"destroy"),i.collection=null,i.model.destroy(),i.model=null,i.unbind(),i.undelegateEvents(),i.remove(),this._super.prototype.destroy(!0)},l});