define([],function(){var e={hideOptions:function(e,t){e.isOptionsVisible=t,t?$(e.itemViewContainer).hide():$(e.itemViewContainer).show()},hideQuestion:function(e,t){e.isQuestionVisible=t,t?e.$("#question_"+e.model.get("quesId")).hide():e.$("#question_"+e.model.get("quesId")).show()},enableOptions:function(e,t){e.isOptionsEnabled=t;var o=e.$el.find("input[type='"+e.strOptType+"']");o.attr("disabled","disabled"),t?o.removeAttr("disabled"):o.attr("disabled","disabled")},doValidation:function(e){var t,o,i=[];return t=_.filter(e.collection.models,function(e){return e.get("checked")===!0}),t.length>0?_.each(t,function(e){i.push(e.get("id"))}):console.error("User has not selected any options yet!"),o=e.model.get("correctOptions"),e.isCorrect=0===$(i).not(o).length&&0===$(o).not(i).length,e.objFeedbackDiv=null,e.objFeedbackDiv=e.isCorrect&&e.model.get("correctFeedback")?e.$el.find("#correctFB_"+e.model.get("quesId")):e.$el.find("#incorrectFB_"+e.model.get("quesId")),this.hideQuesFeedback(e,!0),e.isCorrect},validateOption:function(e,t,o){var i,d,a,c,s,n=-1;return c=o.model.get("id"),o.model.get("checked")&&(n=e.model.get("correctOptions").indexOf(c)),i=-1===n?!1:!0,a=o.model.get("groupName"),d=i?t.find("#correctFB_"+a+"_"+c):t.find("#incorrectFB_"+a+"_"+c),"radio"===e.strOptType?(e.arrOptFeedbackDiv=[],s="feedbackDiv_"+a+"_"+o.model.get("id")):s="feedbackDiv_"+a+"_"+o.model.get("id"),e.arrOptFeedbackDiv[s]={optionEl:o,feedbackDiv:d},i},autoSelectOptions:function(e,t){var o,i,d,a,c,s,n,r=0;if(d=t===!1?e.selectedOptionsIDs:e.model.get("correctOptions"),i=d.length,a=e.$(e.itemViewContainer+" div[data-cid]"),i>0)for(r=0;r<a.length;r+=1)if(c=$(a[r]),s=c.attr("data-cid"),n=e.children.findByModelCid(s),"radio"===e.strOptType){if(n.model.get("id")===d[0]){this.autoSelectAndValidate(e,c,n);break}}else for(o=0;i>o;o+=1)if(n.model.get("id")===d[o]){this.autoSelectAndValidate(e,c,n);break}},autoSelectAndValidate:function(e,t,o){if(o.select(!0),e.isReviewMode===!0){var i=!1,d=!1;this.validateOption(e,t,o),e.mcqData.hasOwnProperty("showOptionFeedback")&&(i=e.mcqData.showOptionFeedback),e.mcqData.hasOwnProperty("showQuestionFeedback")&&(d=e.mcqData.showQuestionFeedback),this.showFeedback(e,"options",i),this.hideQuesFeedback(e,!d)}},showFeedback:function(e,t,o){switch(t){case"global":o?e.objFeedbackDiv.show():e.objFeedbackDiv.hide();break;case"all":o?e.objFeedbackDiv.show():e.objFeedbackDiv.hide(),this.showHideOptFeedback(e,o);break;case"options":this.showHideOptFeedback(e,o);break;default:o?e.objFeedbackDiv.show():e.objFeedbackDiv.hide()}},showHideOptFeedback:function(e,t){var o,i,d;for(o in e.arrOptFeedbackDiv)e.arrOptFeedbackDiv.hasOwnProperty(o)&&(i=e.arrOptFeedbackDiv[o].optionEl,d=e.arrOptFeedbackDiv[o].feedbackDiv,t&&i.model.get("checked")===!0?d.show():d.hide())},hideQuesFeedback:function(e,t){var o,i;o=e.$("#correctFB_"+e.model.get("quesId")),i=e.$("#incorrectFB_"+e.model.get("quesId")),t?(o.hide(),i.hide()):(o.show(),i.show())},prepareData:function(e,t){if(t.options){var o,i,d,a,c,s,n;i=Backbone.Model.extend({defaults:{quesLabel:"Sample question label"}}),d=Backbone.Model.extend({defaults:{id:0,groupName:"radio",label:"option",img:""}}),a=Backbone.Collection.extend({model:d}),e.model=new i,e.model.set("quesId",t.id),e.model.set("quesType",t.type),e.model.set("correctOptions",t.correctOptions.split(",")),e.model.set("quesLabel",t.label),e.model.set("img",t.image),e.model.set("theme",t.theme),t.hasOwnProperty("feedback")?(e.model.set("isFeedbackAvailable",!0),e.model.set("correctFeedback",t.feedback.correct),e.model.set("incorrectFeedback",t.feedback.incorrect)):e.model.set("isFeedbackAvailable",!1),o=[],c=t.options.option,void 0===c.length?(s=new d,s.set("id",c.id),s.set("groupName",t.id),s.set("label",c.label),s.set("img",c.image),c.hasOwnProperty("theme")?s.set("optionTheme",c.theme):s.set("optionTheme","option_"+t.id+"_"+c.id),c.hasOwnProperty("feedback")?(s.set("isFeedbackAvailable",!0),s.set("correctFeedback",c.feedback.correct),s.set("incorrectFeedback",c.feedback.incorrect)):s.set("isFeedbackAvailable",!1),o.push(s)):(n=0,_.each(c,function(e){var i=new d;i.set("id",e.id),i.set("groupName",t.id),i.set("label",e.label),i.set("img",e.image),e.hasOwnProperty("theme")?i.set("optionTheme",e.theme):i.set("optionTheme","option_"+t.id+"_"+e.id),n++,e.hasOwnProperty("feedback")?(i.set("isFeedbackAvailable",!0),i.set("correctFeedback",e.feedback.correct),i.set("incorrectFeedback",e.feedback.incorrect)):i.set("isFeedbackAvailable",!1),o.push(i)})),e.randomize===!0?(e.collection=new a(_.shuffle(o)),o.length=0):(e.collection=new a(o),o.length=0)}},createDummyData:function(e){var t;t=Backbone.Model.extend({defaults:{quesLabel:"Sample question label"}}),e.model=new t,e.model.set("quesId",""),e.model.set("img",""),e.model.set("quesType",""),e.model.set("correctOptions",""),e.model.set("quesLabel",""),e.model.set("theme",""),e.model.set("isFeedbackAvailable",!1)}};return e});