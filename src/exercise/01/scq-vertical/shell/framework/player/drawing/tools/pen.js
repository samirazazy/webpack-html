define(["marionette","player/drawing/base/base-tool"],function(t,e){var s;return s=e.extend({objCanvas:void 0,canvasCTX:void 0,previousX:0,previousY:0,currentX:0,currentY:0,lineWidth:4,strokeStyle:"#FF0099",flag:!1,mouseEventHandler:void 0,constructor:function(t){this.objCanvas=t}}),s.prototype.start=function(t){this.lineWidth=1,this.strokeStyle="rgba(0,0,0)",this.objCanvas=t,this.initPenTool()},s.prototype.initPenTool=function(){this.canvasCTX=this.objCanvas.getContext("2d"),this.addEventsToCanvas()},s.prototype.addEventsToCanvas=function(){var t=this;this.mouseEventHandler=function(e){t.handleMouseOnCanvas(e)},this.objCanvas.addEventListener(e.MOUSE_MOVE,t.mouseEventHandler),this.objCanvas.addEventListener(e.MOUSE_DOWN,t.mouseEventHandler),this.objCanvas.addEventListener(e.MOUSE_UP,t.mouseEventHandler),this.objCanvas.addEventListener(e.MOUSE_OUT,t.mouseEventHandler)},s.prototype.handleMouseOnCanvas=function(t){var s=t.type;switch(s){case e.MOUSE_MOVE:this.flag===!0&&(this.previousX=this.currentX,this.previousY=this.currentY,this.currentX=t.offsetX,this.currentY=t.offsetY,this.drawLine());break;case e.MOUSE_DOWN:this.canvasCTX.beginPath(),this.previousX=this.currentX,this.previousY=this.currentY,this.currentX=t.offsetX,this.currentY=t.offsetY,this.flag=!0;break;case e.MOUSE_UP:this.flag=!1;break;case e.MOUSE_OUT:this.flag=!1}},s.prototype.drawLine=function(){this.canvasCTX.beginPath(),this.canvasCTX.moveTo(this.previousX,this.previousY),this.canvasCTX.lineTo(this.currentX,this.currentY),this.canvasCTX.strokeStyle=this.strokeStyle,this.canvasCTX.lineWidth=this.lineWidth,this.canvasCTX.stroke(),this.canvasCTX.closePath()},s.prototype.stop=function(){this.objCanvas.removeEventListener(e.MOUSE_MOVE,this.mouseEventHandler),this.objCanvas.removeEventListener(e.MOUSE_DOWN,this.mouseEventHandler),this.objCanvas.removeEventListener(e.MOUSE_UP,this.mouseEventHandler),this.objCanvas.removeEventListener(e.MOUSE_OUT,this.mouseEventHandler)},s.prototype.destroy=function(){this.stop()},s});