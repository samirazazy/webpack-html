define(["require","module"],function(){function t(t,u,e){return t=n(t),t.match(/^\/|([^\:\/]*:)/)?t:s(r(t,u),e)}function r(t,r){"./"==t.substr(0,2)&&(t=t.substr(2));var s=r.split("/"),u=t.split("/");for(s.pop();curPart=u.shift();)".."==curPart?s.pop():s.push(curPart);return s.join("/")}function s(t,r){var s=r.split("/");for(s.pop(),r=s.join("/")+"/",i=0;r.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=r.substr(i,1);)i--;r=r.substr(i+1),t=t.substr(i+1),s=r.split("/");var u=t.split("/");for(out="";s.shift();)out+="../";for(;curPart=u.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var u=/(^\/+)|([^:])\/+/g,n=function(t){return t.replace(u,"$2/")},e=function(r,s,u){s=n(s),u=n(u);for(var e,i,r,o=/(url\(\s*"([^\)]*)"\s*\))|(url\(\s*'([^\)]*)'\s*\))|(url\(\s*([^\)]*)\s*\))/g;e=o.exec(r);){i=e[2]||e[4]||e[6];var l=t(i,s,u),a=e[2]||e[4]?1:0;r=r.substr(0,o.lastIndex-i.length-a-1)+l+r.substr(o.lastIndex-a-1),o.lastIndex=o.lastIndex+(l.length-i.length)}for(var f=/(@import\s*'(.*)')|(@import\s*"(.*)")/g;e=f.exec(r);){i=e[2]||e[4];var l=t(i,s,u);r=r.substr(0,f.lastIndex-i.length-1)+l+r.substr(f.lastIndex-1),f.lastIndex=f.lastIndex+(l.length-i.length)}return r};return e.convertURIBase=t,e});